export class Graph{constructor(t=512){this.maxPoints=t,this.lines={},this.limit=0,this.limitIndex=0,this.domElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.domElement.setAttribute("class","graph-svg")}addLine(t,i){const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class","graph-path"),s.style.stroke=`var(${i})`,s.style.fill=`var(${i})`,this.domElement.appendChild(s),this.lines[t]={path:s,color:i,points:[]}}addPoint(t,i){const s=this.lines[t];s&&(s.points.push(i),s.points.length>this.maxPoints&&s.points.shift(),i>this.limit&&(this.limit=i,this.limitIndex=0))}resetLimit(){this.limit=0,this.limitIndex=0}update(){const t=this.domElement.clientWidth,i=this.domElement.clientHeight;if(0===t)return;const s=t/(this.maxPoints-1);for(const e in this.lines){const n=this.lines[e];let h=`M 0,${i}`;for(let t=0;t<n.points.length;t++){h+=` L ${t*s},${i-n.points[t]/this.limit*i}`}h+=` L ${(n.points.length-1)*s},${i} Z`;const l=t-(n.points.length-1)*s;n.path.setAttribute("transform",`translate(${l}, 0)`),n.path.setAttribute("d",h)}this.limitIndex++>this.maxPoints&&this.resetLimit()}}