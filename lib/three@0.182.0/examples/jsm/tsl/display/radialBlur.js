import{interleavedGradientNoise,Fn,vec2,vec4,mix,uv,Loop,premultiplyAlpha,unpremultiplyAlpha,int,float,nodeObject,convertToTexture,screenCoordinate}from"three/tsl";export const radialBlur=Fn(([e,t={}])=>{e=convertToTexture(e);const n=nodeObject(t.center)||vec2(.5,.5),o=nodeObject(t.weight)||float(.9),i=nodeObject(t.decay)||float(.95),r=nodeObject(t.count)||int(32),l=nodeObject(t.exposure)||float(5),s=t.premultipliedAlpha||!1,a=t=>{const n=e.sample(t);return s?premultiplyAlpha(n):n},d=vec2(e.uvNode||uv()),c=a(d).toConst(),u=vec4().toVar(),p=n.sub(d).div(r).toConst(),m=float(o).toVar(),v=interleavedGradientNoise(screenCoordinate);d.addAssign(p.mul(v)),Loop({start:int(0),end:int(r),type:"int",condition:"<"},()=>{d.addAssign(p);const e=a(d);u.addAssign(e.mul(m)),m.mulAssign(i)}),u.divAssign(r),u.mulAssign(l);const A=mix(u,c.mul(2),.5);return s?unpremultiplyAlpha(A):A});