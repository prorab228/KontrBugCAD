import{float,Fn,vec2,uv,sin,rand,degrees,cos,Loop,vec4,premultiplyAlpha,unpremultiplyAlpha,convertToTexture,nodeObject}from"three/tsl";export const hashBlur=Fn(([e,t=float(.1),l={}])=>{e=convertToTexture(e);const r=nodeObject(l.repeats)||float(45),o=l.premultipliedAlpha||!1,p=e.uvNode||uv(),d=vec4(0);return Loop({start:0,end:r,type:"float"},({i:l})=>{const n=vec2(vec2(cos(degrees(l.div(r).mul(360))),sin(degrees(l.div(r).mul(360)))).mul(rand(vec2(l,p.x.add(p.y))).add(t))),s=vec2(p.add(n.mul(t)));d.addAssign((t=>{const l=e.sample(t);return o?premultiplyAlpha(l):l})(s))}),d.divAssign(r),o?unpremultiplyAlpha(d):d});