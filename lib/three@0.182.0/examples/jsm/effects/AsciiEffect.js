class AsciiEffect{constructor(e,t=" .:-=+*#%@",o={}){const c=o.resolution||.15,l=o.scale||1,s=o.color||!1,n=o.alpha||!1,a=o.block||!1,r=o.invert||!1,i=o.strResolution||"low";let d,p;const f=document.createElement("div");f.style.cursor="default";const g=document.createElement("table");let h,u,m;f.appendChild(g),this.setSize=function(t,o){d=t,p=o,e.setSize(t,o),function(){h=Math.floor(d*c),u=Math.floor(p*c),w.width=h,w.height=u,m=e.domElement,m.style.backgroundColor&&(g.rows[0].cells[0].style.backgroundColor=m.style.backgroundColor,g.rows[0].cells[0].style.color=m.style.color);g.cellSpacing="0",g.cellPadding="0";const t=g.style;t.whiteSpace="pre",t.margin="0px",t.padding="0px",t.letterSpacing=S+"px",t.fontFamily=b,t.fontSize=C+"px",t.lineHeight=E+"px",t.textAlign="left",t.textDecoration="none"}()},this.render=function(t,o){e.render(t,o),function(e){x.clearRect(0,0,h,u),x.drawImage(k,0,0,h,u);const t=x.getImageData(0,0,h,u).data;let o="";const c=y.length-1;for(let e=0;e<u;e+=2){for(let l=0;l<h;l++){const i=4*(e*h+l),d=t[i],p=t[i+1],f=t[i+2],g=t[i+3];let u=(.3*d+.59*p+.11*f)/255;0==g&&(u=1);let m=Math.round((1-u)*c);r&&(m=c-m);let b=y[m];void 0!==b&&" "!=b||(b="&nbsp;"),o+=s?"<span style='color:rgb("+d+","+p+","+f+");"+(a?"background-color:rgb("+d+","+p+","+f+");":"")+(n?"opacity:"+g/255+";":"")+"'>"+b+"</span>":b}o+="<br/>"}e.innerHTML=`<tr><td style="display:block;width:${d}px;height:${p}px;overflow:hidden">${o}</td></tr>`}(g)},this.domElement=f;const b="courier new, monospace",k=e.domElement,w=document.createElement("canvas");if(!w.getContext)return;const x=w.getContext("2d");if(!x.getImageData)return;let y;if(t)y=t.split("");else{const e=" .,:;i1tfLCG08@".split(""),t=" CGO08@".split("");y=s?t:e}const C=2/c*l,E=2/c*l;let S=0;if("low"==i)switch(l){case 1:S=-1;break;case 2:case 3:S=-2.1;break;case 4:S=-3.1;break;case 5:S=-4.15}if("medium"==i)switch(l){case 1:S=0;break;case 2:S=-1;break;case 3:S=-1.04;break;case 4:case 5:S=-2.1}if("high"==i)switch(l){case 1:case 2:S=0;break;case 3:case 4:case 5:S=-1}}}export{AsciiEffect};