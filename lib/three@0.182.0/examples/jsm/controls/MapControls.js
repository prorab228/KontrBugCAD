import{MOUSE,TOUCH,Plane,Raycaster,Vector2,Vector3}from"three";import{OrbitControls}from"./OrbitControls.js";const _plane=new Plane,_raycaster=new Raycaster,_mouse=new Vector2,_panCurrent=new Vector3;class MapControls extends OrbitControls{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons={LEFT:MOUSE.PAN,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.ROTATE},this.touches={ONE:TOUCH.PAN,TWO:TOUCH.DOLLY_ROTATE},this._panWorldStart=new Vector3}_handleMouseDownPan(e){if(super._handleMouseDownPan(e),this._panOffset.set(0,0,0),!0===this.screenSpacePanning)return;_plane.setFromNormalAndCoplanarPoint(this.object.up,this.target);const t=this.domElement.getBoundingClientRect();_mouse.x=(e.clientX-t.left)/t.width*2-1,_mouse.y=-(e.clientY-t.top)/t.height*2+1,_raycaster.setFromCamera(_mouse,this.object),_raycaster.ray.intersectPlane(_plane,this._panWorldStart)}_handleMouseMovePan(e){if(!0===this.screenSpacePanning)return void super._handleMouseMovePan(e);const t=this.domElement.getBoundingClientRect();_mouse.x=(e.clientX-t.left)/t.width*2-1,_mouse.y=-(e.clientY-t.top)/t.height*2+1,_raycaster.setFromCamera(_mouse,this.object),_raycaster.ray.intersectPlane(_plane,_panCurrent)&&(_panCurrent.sub(this._panWorldStart),this._panOffset.copy(_panCurrent).negate(),this.update())}}export{MapControls};