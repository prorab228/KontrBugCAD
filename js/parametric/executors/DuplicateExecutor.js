class DuplicateExecutor extends ParametricExecutor{_deepCloneResources(e){e.geometry&&(e.geometry=e.geometry.clone()),e.material&&(Array.isArray(e.material)?e.material=e.material.map(e=>e.clone()):e.material=e.material.clone()),e.children.forEach(e=>this._deepCloneResources(e))}execute(e,t){const{sourceUuids:o,offset:r=[10,0,0]}=e.parameters,a=[];for(const e of o){const o=t.objectMap.get(e);if(!o)throw new Error(`DuplicateExecutor: исходный объект с UUID ${e} не найден в модели`);const i=o.clone();this._deepCloneResources(i),i.position.copy(o.position),i.position.x+=r[0],i.position.y+=r[1],i.position.z+=r[2],i.userData=JSON.parse(JSON.stringify(o.userData||{})),i.userData.originalUuid=o.uuid,i.userData.originalMaterial=o.userData.originalMaterial,a.push(i)}if(e.outputs&&e.outputs.length===a.length)for(let t=0;t<a.length;t++)a[t].uuid=e.outputs[t];else e.outputs=a.map(e=>e.uuid);return a}}