class ImportSTLExecutor extends ParametricExecutor{execute(e,o){const{filePath:t,color:r=9159498,position:n=[0,0,0],geometryData:i}=e.parameters;let a;if(i){a=new THREE.BufferGeometry;const e=new Float32Array(i.positions);a.setAttribute("position",new THREE.BufferAttribute(e,3)),i.indices&&a.setIndex(new THREE.BufferAttribute(new Uint32Array(i.indices),1)),i.boundingBox&&(a.boundingBox=new THREE.Box3((new THREE.Vector3).fromArray(i.boundingBox.min),(new THREE.Vector3).fromArray(i.boundingBox.max))),a.computeVertexNormals()}else{const e=o.editor.libraryManager.modelCache.get(t);if(!e)throw new Error(`STL геометрия для ${t} не найдена в кэше`);a=e.geometry.clone()}const s=new THREE.MeshPhongMaterial({color:r}),u=new THREE.Mesh(a,s);u.castShadow=!0,u.receiveShadow=!0,a.computeBoundingBox();const c=a.boundingBox,E=c.max.y-c.min.y,l=(new THREE.Vector3).fromArray(n);return l.y+=E/2,u.position.copy(l),e.outputs.length>0?u.uuid=e.outputs[0]:e.outputs=[u.uuid],u.userData={type:"stl",filePath:t,color:r,originalPosition:n},u}}