import*as THREE from"three";import{ParametricExecutor}from"./ParametricExecutor.js";export class UngroupExecutor extends ParametricExecutor{execute(e,r){const{groupId:o,childrenData:t}=e.parameters,c=r.objectMap.get(o);if(!c)throw new Error(`Ungroup: группа ${o} не найдена`);const a=[];for(let e=c.children.length-1;e>=0;e--){const r=c.children[e];r!==c&&a.push(r)}c.updateWorldMatrix(!0,!0);for(const e of a){const o=e.matrixWorld.clone();c.remove(e),r.editor.objectsGroup.add(e);const t=new THREE.Vector3,a=new THREE.Quaternion,n=new THREE.Vector3;o.decompose(t,a,n),e.position.copy(t),e.quaternion.copy(a),e.scale.copy(n),delete e.userData.isPartOfGroup,delete e.userData.originalGroup,r.objectMap.set(e.uuid,e)}return r.sceneGroup.remove(c),r.objectMap.delete(o),null}}