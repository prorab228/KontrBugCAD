class SketchViewManager{constructor(e){this.sketchManager=e,this.grid=null,this.gridVisible=!0,this.gridStep=1,this.gridSize=50}recreateGrid(){this.removeSketchGrid(),this.gridVisible&&this.createSketchGrid()}createSketchGrid(){if(this.removeSketchGrid(),!this.sketchManager.currentPlane||!this.gridVisible)return;let e=this.sketchManager.gridStep;"inch"===this.sketchManager.editor.gridUnit&&(e*=25.4);const i=this.gridSize,t=e,r=i/t,s=2236962,h=5592405;for(let e=1;e<=r;e++){const r=e*t;this.createGridLine(-i,r,i,r,0===e?h:s)}for(let e=0;e>=-r;e--){const r=e*t;this.createGridLine(-i,r,i,r,0===e?h:s)}for(let e=1;e<=r;e++){const r=e*t;this.createGridLine(r,-i,r,i,0===e?h:s)}for(let e=0;e>=-r;e--){const r=e*t;this.createGridLine(r,-i,r,i,0===e?h:s)}}createGridLine(e,i,t,r,s){const h=new THREE.Vector3(e,i,.05),d=new THREE.Vector3(t,r,.05),a=(new THREE.BufferGeometry).setFromPoints([h,d]),c=new THREE.LineBasicMaterial({color:s,linewidth:1,transparent:!0,opacity:.1}),n=new THREE.Line(a,c);n.userData.isGrid=!0,this.sketchManager.currentPlane.add(n),this.grid||(this.grid=[]),this.grid.push(n)}removeSketchGrid(){this.grid&&(this.grid.forEach(e=>{e.parent&&e.parent.remove(e),e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}),this.grid=null)}updateGrid(){this.gridVisible?this.createSketchGrid():this.removeSketchGrid()}setGridVisible(e){this.gridVisible=e,this.updateGrid()}clear(){this.removeSketchGrid(),this.grid=null,this.gridVisible=!0}}