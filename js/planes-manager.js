class PlanesManager{constructor(e){this.editor=e}createBasePlanes(){this.editor.basePlanes&&this.editor.worldGroup.remove(this.editor.basePlanes),this.editor.basePlanes=new THREE.Group,this.editor.basePlanes.name="base_planes";[{type:"xy",color:65280,position:{z:0},rotation:{x:0}},{type:"xz",color:16711680,position:{y:0},rotation:{x:Math.PI/2}},{type:"yz",color:255,position:{x:0},rotation:{y:Math.PI/2,x:0}}].forEach(e=>{const t=this.createBasePlane(e.type,e.color);Object.assign(t.position,e.position),Object.assign(t.rotation,e.rotation),this.editor.basePlanes.add(t)}),this.editor.basePlanes.visible=!1,this.editor.worldGroup.add(this.editor.basePlanes)}createBasePlane(e,t){const a=new THREE.PlaneGeometry(50,50),o=new THREE.MeshBasicMaterial({color:t,transparent:!0,opacity:.1,side:THREE.DoubleSide}),n=new THREE.Mesh(a,o);return n.name=`base_plane_${e}`,n.userData={type:"base_plane",planeType:e,basePlane:!0},n}createWorkPlaneObject(e="Рабочая плоскость",t="custom"){const a=new THREE.PlaneGeometry(50,50),o=new THREE.MeshBasicMaterial({color:9868816,transparent:!0,opacity:.1,side:THREE.DoubleSide,depthWrite:!1}),n=new THREE.Mesh(a,o);return n.name=`WorkPlane_${Date.now()}`,n.userData={type:"work_plane",id:`work_plane_${Date.now()}`,name:e,planeType:t,createdAt:(new Date).toISOString(),operations:[]},n}createSketchPlaneObject(){const e=new THREE.PlaneGeometry(100,100),t=new THREE.MeshBasicMaterial({color:14540253,transparent:!0,opacity:.5,side:THREE.DoubleSide,depthWrite:!1}),a=new THREE.Mesh(e,t);return a.name=`SketchPlane_${Date.now()}`,a.userData={type:"sketch_plane",id:`sketch_plane_${Date.now()}`,name:"Плоскость скетча",createdAt:(new Date).toISOString(),sketchElements:[]},a}setCameraForSketch(e){const t=new THREE.Vector3(0,0,1);t.applyQuaternion(e.quaternion);const a=e.position.clone().add(t.multiplyScalar(100));this.editor.camera.position.copy(a),this.editor.camera.lookAt(e.position);const o=new THREE.Vector3(0,1,0);o.applyQuaternion(e.quaternion),this.editor.camera.up.copy(o),this.editor.controls.target.copy(e.position),this.editor.controls.update()}}